# Repository Guidelines

## Структура проекта
- Точка входа: `src/main.rs`. Логику выносить в модули внутри `src/`, оставляя `main.rs` тонким.
- Повторно используемый код добавлять как `src/<module>.rs` либо в подкаталог `src/<module>/mod.rs` с осмысленными названиями домена.
- Интеграционные тесты размещать в `tests/` (создайте при необходимости); модульные тесты хранить рядом с кодом в блоках `#[cfg(test)]`.
- Сборочные артефакты лежат в `target/` (игнорируется). Служебные файлы IDE вроде `.idea/` не коммитить.

## Сборка, тесты и разработка
- `cargo run` — сборка и запуск бинаря в режиме разработки.
- `cargo build --release` — оптимизированная сборка в `target/release/`.
- `cargo test` — запуск всех модульных и интеграционных тестов.
- `cargo fmt` — форматирование кода `rustfmt`.
- `cargo clippy -- -D warnings` — статический анализ Clippy с запретом предупреждений.

## Стиль и именование
- Rust 2021: отступ 4 пробела, `snake_case` для функций и модулей, `CamelCase` для типов/структур/перечислений, `SCREAMING_SNAKE_CASE` для констант.
- Перед пушем обязательно `cargo fmt`; функции держать компактными, выносить логику в небольшие чистые помощники.
- Модули называть по домену (`swap`, `geyser_client`, `accounting`), не накапливать код в `main.rs`.

## Тестирование
- Модульные тесты рядом с кодом, имена вида `test_<поведение>()`.
- Интеграционные сценарии или проверки CLI — в `tests/<feature>_test.rs` с описательными именами.
- Использовать детерминированные данные; сетевые или временные зависимости закрывать фичами.
- Перед пулреквестом запускать `cargo test` (при отладке `cargo test -- --nocapture`) и кратко фиксировать важные выводы.

## Коммиты и пулреквесты
- Сообщения коммитов в повелительном наклонении; допустимы префиксы Conventional Commits (`feat:`, `fix:`, `chore:`, `refactor:`). Коммиты должны быть короткими и сфокусированными.
- Пулреквест: краткое резюме, ссылка на задачу (если есть), заметки по архитектуре, раздел «Testing» с перечисленными командами.
- При пользовательских изменениях прикладывать скриншоты или журналы; не коммитить артефакты из `target/`.

## Безопасность и конфигурация
- Не коммитить секреты и приватные ключи; конфигурацию загружать из переменных окружения или локальных игнорируемых файлов.
- При добавлении зависимостей проверять их: при наличии инструмента выполнять `cargo audit`.
- Удаление файлов в репозитории запрещено; любые операции удаления требуют отдельного подтверждения владельца.

## Промт для агента
- Общение вести только на русском языке, без англицизмов и сленга; тон деловой и уважительный.
- Перед решением каждой задачи обязательно собрать и проанализировать материалы в базе знаний SDK `C:\Users\CIA\Desktop\SDK` и в материалах которые предложит пользователь (если предложит иначе база знаний).
- Перед написанием кода изучать официальную документацию, импорты, типы, зависимости, сигнатуры функций в базе знаний; только после этого приступать к реализации.
- В коде не использовать заглушки, упрощения, сокращения и пометки `TODO`; писать полноценные реализационные фрагменты.
